from cshd import calc_phenometrics_cube, params_phenometrics, cshd_cube

config = params_phenometrics(
    peak_metric='pos', 
    base_metric='vos', 
    method='seasonal_amplitude', 
    factor=0.2, 
    thresh_sides='two_sided', 
    abs_value=0.1
)

print(config)

evi_cube = cshd_cube(
    timeseries=[
        [5034.0, 1538.0, 4338.0, 4715.0, 4769.0, 3495.0, 4337.0, 3555.0, 4258.0, 3299.0, 3375.0, 3490.0, 3179.0, 3331.0, 2852.0, 3134.0, 1590.0, 1688.0, 3547.0, 5257.0, 4596.0, 6000.0, 3755.0, 1817.0, 2979.0, 6064.0, 6210.0, 4429.0, 4625.0, 2731.0, 4075.0, 1682.0, 3635.0, 3359.0, 3489.0, 3416.0, 3405.0, 3063.0, 3030.0, 2936.0, 1476.0, 2909.0, 3384.0, 3722.0, 4163.0, 2343.0, 4719.0, 5323.0, 2797.0, 3587.0, 4674.0, 3902.0, 3163.0, 4350.0, 3783.0, 3309.0, 3382.0, 3330.0, 3296.0, 3451.0, 3149.0, 3312.0, 2975.0, 4569.0, 4707.0, 4348.0, 3561.0, 3015.0, 133.0, 4642.0, 4549.0, 5955.0, 4680.0, 4523.0, 5017.0, 4358.0, 3742.0, 3729.0, 3329.0, 3229.0, 3133.0, 3131.0, 2923.0, 2809.0, 2885.0, 2939.0, 3569.0], 
        [5540.0, 6027.0, 6602.0, 5859.0, 6769.0, 5694.0, 3970.0, 4828.0, 4951.0, 4740.0, 4646.0, 4209.0, 4004.0, 3785.0, 3628.0, 3395.0, 3262.0, 4246.0, 4879.0, 4780.0, -6925.0, 5086.0, 4794.0, 5942.0, 5751.0, 4379.0, 5667.0, 2343.0, 5395.0, 3322.0, 5019.0, 4574.0, 4675.0, 4690.0, 4652.0, 4244.0, 3935.0, 3654.0, 3333.0, 2923.0, 3252.0, 4069.0, 5607.0, 6194.0, 3166.0, 5882.0, 6537.0, 5873.0, 5025.0, 6465.0, 3036.0, 2641.0, 5431.0, 5074.0, 4127.0, 4479.0, 4141.0, 4043.0, 3983.0, 3435.0, 3171.0, 3174.0, 3272.0, 3493.0, 4988.0, 3752.0, 6024.0, 6803.0, 3594.0, 6663.0, -8076.0, 3007.0, 5066.0, 5385.0, 5399.0, 5133.0, 3308.0, 4483.0, 3731.0, 4132.0, 3898.0, 3668.0, 3426.0, 3199.0, 3464.0, 3268.0, 3609.0]
    ],
    start_date='2019-01-01',
    freq='16D'
)

print(evi_cube)

ds_phenos = calc_phenometrics_cube(
    cshd_cube=evi_cube,
    engine='phenolopy',
    config=config,
    start_date='2019-01-01'
)

print(ds_phenos)